{"version":3,"file":"js/884.c4c5ee2a.js","mappings":"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","sources":["webpack://furniture-project/./src/views/frontend/UserCheckout.vue","webpack://furniture-project/./src/views/frontend/UserCheckout.vue?9c09"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n <div class=\"my-5\">\n    <div class=\"container\">\n      <div class=\"border p-3 p-md-5\">\n        <div class=\"row justify-content-center\">\n          <form class=\"col-12 col-lg-8 py-3 table-responsive\">\n            <h2 class=\"fs-3\">購物清單</h2>\n            <table class=\"table align-middle mt-3\">\n              <thead class=\"table-bg text-custom text-nowrap\">\n                <tr>\n                    <th>品名</th>\n                    <th class=\"text-end\">單價</th>\n                    <th class=\"text-end\">數量</th>\n                    <th class=\"text-end\">小計</th>\n                </tr>\n              </thead>\n              <tbody class=\"text-nowrap\">\n                <tr v-for=\"item in order.products\" :key=\"item.id\">\n                    <td>{{ item.product.title }}</td>\n                    <td class=\"text-end\">{{ $filters.currency(item.product.price) }}</td>\n                    <td class=\"text-end\">{{ item.qty }} / {{ item.product.unit }}</td>\n                    <td class=\"text-end\">{{ $filters.currency(item.total) }}</td>\n                </tr>\n              </tbody>\n            </table>\n            <table class=\"w-100\">\n                <tbody>\n                  <!-- <tr>\n                    <td class=\"text-end py-2\">運費</td>\n                    <td class=\"text-end w-50\">NT$ {{ $filters.currency(deliveryFee) }}</td>\n                  </tr> -->\n                  <!-- <tr class=\"text-success\">\n                    <td class=\"text-end py-2\">優惠折扣</td>\n                    <td class=\"text-end w-50\" >\n                       - NT$ {{ $filters.currency(cart.total - cart.final_total) }}\n                    </td>\n                  </tr> -->\n                  <tr class=\"border-top \">\n                    <td class=\"text-end py-2\">總計金額</td>\n                    <td class=\"text-end w-50\">NT$ {{ $filters.currency(order.total) }}</td>\n                  </tr>\n                </tbody>\n              </table>\n          </form>\n          <form class=\"col-12 col-lg-8 mt-3 table-responsive\">\n            <h2 class=\"fs-3  text-custom\">收件人資料</h2>\n            <table class=\"table border mt-3\">\n              <tbody class=\" text-nowrap\">\n                <tr>\n                  <th width=\"100\" class=\"table-bg text-custom\">Email</th>\n                  <td>{{ order.user.email }}</td>\n                </tr>\n                <tr>\n                  <th class=\"table-bg text-custom\">姓名</th>\n                  <td>{{ order.user.name }}</td>\n                </tr>\n                <tr>\n                  <th class=\"table-bg text-custom\">收件人電話</th>\n                  <td>{{ order.user.tel }}</td>\n                </tr>\n                <tr>\n                  <th class=\"table-bg text-custom\">收件人地址</th>\n                  <td>{{ order.user.address }}</td>\n                </tr>\n                <tr>\n                  <th class=\"table-bg text-custom\">付款狀態</th>\n                  <td>\n                    <span v-if=\"!order.is_paid\" class=\"text-secondary\">尚未付款</span>\n                    <span v-else class=\"text-success\">付款完成</span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <div class=\"text-end\" v-if=\"order.is_paid === false\">\n              <button type=\"button\" @click=\"payOrder\" class=\"btn btn-outline-custom \">確認付款</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Swal from 'sweetalert2/dist/sweetalert2';\nimport 'sweetalert2/src/sweetalert2.scss';\n\nexport default {\n  data() {\n    return {\n      cart: {},\n      order: {\n        user: {},\n      },\n      deliveryFee: 0,\n      orderId: '',\n      isLoading: false,\n    };\n  },\n  inject: {\n    emitter: ['emitter'],\n  },\n  methods: {\n    getOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            console.log('order:', res.data.order);\n            this.isLoading = false;\n            this.order = res.data.order;\n            this.getCart();\n          }\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            console.log('cart:', res.data.data);\n            console.log('cart.total:', res.data.data.total);\n            console.log('cart.final_total:', res.data.data.final_total);\n            this.cart = res.data.data;\n          }\n        });\n    },\n    payOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\n      setTimeout(() => {\n        this.$http.post(url)\n          .then((res) => {\n            if (res.data.success) {\n              this.isLoading = false;\n              this.emitter.emit('update-cart', this.cart.carts.id);\n              let timerInterval;\n              Swal.fire({\n                icon: 'success',\n                title: '付款完成！',\n                html: '將於 <b></b> 秒後關閉',\n                timer: 3000,\n                didOpen: () => {\n                  Swal.showLoading();\n                  const b = Swal.getHtmlContainer().querySelector('b');\n                  timerInterval = setInterval(() => {\n                    b.textContent = parseInt(Swal.getTimerLeft() / 1000, 10);\n                  }, 100);\n                },\n                willClose: () => {\n                  clearInterval(timerInterval);\n                },\n              }).then((result) => {\n                if (result.dismiss === Swal.DismissReason.timer) {\n                  this.$router.push('/productList');\n                }\n              });\n              this.getOrder();\n            } else {\n              this.isLoading = false;\n              Swal.fire({\n                icon: 'error',\n                title: '付款失敗！',\n                showConfirmButton: false,\n                timer: 1500,\n              });\n              this.getOrder();\n            }\n          });\n      }, 2000);\n    },\n  },\n  created() {\n    this.isLoading = true;\n    setTimeout(() => {\n      this.orderId = this.$route.params.orderId;\n      this.getOrder();\n      this.isLoading = false;\n    }, 2000);\n  },\n};\n</script>\n<style>\n.text-custom {\n  color: #4f332d !important;\n}\n.table-bg {\n  background-color: #e6e6d6 !important;\n  color: #333 !important;\n}\n.btn-outline-custom {\n  color: #4f332d;\n  border-color: #4f332d;\n}\n.btn-outline-custom:hover {\n  background-color: #4f332d;\n  color: #4EC5B2;\n}\n</style>\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=1f7ec948\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport \"./UserCheckout.vue?vue&type=style&index=0&id=1f7ec948&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_Fragment","_createVNode","_component_LoadingOverlay","active","$data","isLoading","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_renderList","order","products","item","id","_toDisplayString","product","title","_hoisted_8","_ctx","$filters","currency","price","_hoisted_9","qty","unit","_hoisted_10","total","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","width","user","email","name","tel","address","is_paid","_hoisted_18","_hoisted_17","_hoisted_19","type","onClick","_cache","args","$options","payOrder","_createCommentVNode","data","cart","deliveryFee","orderId","inject","emitter","methods","getOrder","this","url","$http","get","then","res","success","console","log","getCart","final_total","setTimeout","post","timerInterval","emit","carts","Swal","icon","html","timer","didOpen","b","querySelector","setInterval","textContent","parseInt","willClose","clearInterval","result","dismiss","$router","push","showConfirmButton","created","$route","params","__exports__","render"],"sourceRoot":""}