"use strict";(self["webpackChunkfurniture_project"]=self["webpackChunkfurniture_project"]||[]).push([[583],{4609:function(t,e){e.A={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},9583:function(t,e,s){s.r(e),s.d(e,{default:function(){return X}});var i=s(6768),a=s(4232),l=s(5130);const n={key:0,class:"my-5"},r={class:"container"},c={class:"border border-2 px-2 py-5 p-lg-5"},d={class:"col-5 col-md-2 mx-auto mt-3"},o={key:1,class:"my-5"},u={class:"container"},h={class:"border border-2 px-1 py-5 p-lg-5"},p={class:"table-responsive-md"},v={class:"table text-nowrap"},L=["src","alt"],g={class:"align-middle"},m={class:"fs-5 mb-0"},k={class:"align-middle text-end"},f={key:0,class:"fs-6 mb-0 text-decoration-line-through text-muted"},b={class:"fs-5 mb-0"},y={class:"align-middle text-end"},x={class:"p-0"},F=["onClick"],C=["onClick"];function w(t,e,s,w,$,_){const E=(0,i.g2)("LoadingOverlay"),S=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(E,{active:$.isLoading},null,8,["active"]),e[5]||(e[5]=(0,i.Lk)("div",{class:"mt-5"},[(0,i.Lk)("div",{class:"banner d-flex flex-column justify-content-center align-items-center"},[(0,i.Lk)("div",{class:"text-center"},[(0,i.Lk)("h1",{class:"text-custom mb-3 fw-bold"},"我的收藏")])])],-1)),$.faveList.length?((0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",u,[(0,i.Lk)("div",h,[(0,i.Lk)("div",p,[(0,i.Lk)("table",v,[e[4]||(e[4]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{colspan:"2",style:{width:"50%"}},"商品資訊"),(0,i.Lk)("th",{class:"text-end",style:{width:"25%"}},"價格"),(0,i.Lk)("th")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)($.faveProduct,(s=>((0,i.uX)(),(0,i.CE)("tr",{key:s.id},[(0,i.Lk)("td",null,[(0,i.Lk)("img",{style:{width:"160px",height:"107px"},src:s.imageUrl,alt:s.title},null,8,L)]),(0,i.Lk)("td",g,[(0,i.Lk)("p",m,(0,a.v_)(s.title),1)]),(0,i.Lk)("td",k,[s.origin_price!==s.price?((0,i.uX)(),(0,i.CE)("p",f," NT$ "+(0,a.v_)(t.$filters.currency(s.origin_price)),1)):(0,i.Q3)("",!0),(0,i.Lk)("p",b,"NT$ "+(0,a.v_)(t.$filters.currency(s.price)),1)]),(0,i.Lk)("td",y,[(0,i.Lk)("div",x,[(0,i.Lk)("button",{type:"button",onClick:(0,l.D$)((t=>_.addCart(s.id,1)),["prevent"]),class:"btn btn-outline-primary btn-sm p-0 me-3","aria-label":"加入購物車"},e[2]||(e[2]=[(0,i.Lk)("i",{class:"bi bi-cart4 fs-4"},null,-1)]),8,F),(0,i.Lk)("button",{type:"button",onClick:(0,l.D$)((t=>_.delFave(s)),["prevent"]),class:"btn btn-outline-danger btn-sm p-0 me-2","aria-label":"移除收藏"},e[3]||(e[3]=[(0,i.Lk)("i",{class:"bi bi-trash3-fill fs-4"},null,-1)]),8,C)])])])))),128))])])])])])])):((0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[e[1]||(e[1]=(0,i.Lk)("h2",{class:"text-center text-custom fw-bold"},"收藏清單目前是空的",-1)),(0,i.Lk)("div",d,[(0,i.bF)(S,{to:"/productList",class:"btn btn-outline-custom btn-sm w-100"},{default:(0,i.k6)((()=>e[0]||(e[0]=[(0,i.eW)(" 前往商品專區 ")]))),_:1})])])])]))],64)}s(8111),s(2489);var $=s(4609),_={data(){return{faveList:$.A.getFavorite()||[],faveProduct:[],isLoading:!1}},inject:["emitter"],methods:{getFave(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/wei8891-api/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.isLoading=!1,this.faveProduct=t.data.products.filter((t=>this.faveList.includes(t.id))))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},updateFave(){this.faveList=$.A.getFavorite()},delFave(t){this.isLoading=!0,this.faveList.splice(this.faveList.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},`已將 ${t.title} 移除收藏清單`),this.isLoading=!1,$.A.saveFavorite(this.faveList),this.emitter.emit("update-fave",this.faveList),this.getFave()},addCart(t,e){this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/api/wei8891-api/cart",i={product_id:t,qty:e};this.$http.post(s,{data:i}).then((e=>{e.data.success&&(this.emitter.emit("update-cart",t),this.isLoading=!1,this.getFave(),this.$httpMessageState(e,"加入購物車"))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))}},created(){this.emitter.on("update-fave",this.updateFave),this.getFave()}},E=s(1241);const S=(0,E.A)(_,[["render",w]]);var X=S}}]);
//# sourceMappingURL=583.e5887809.js.map