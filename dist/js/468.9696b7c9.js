"use strict";(self["webpackChunkfurniture_project"]=self["webpackChunkfurniture_project"]||[]).push([[468],{468:function(t,e,s){s.r(e),s.d(e,{default:function(){return V}});var a=s(6768),c=s(4232),o=s(5130);const l={key:0,class:"my-5"},i={class:"container"},n={class:"border border-2 px-2 py-5 p-lg-5 empty-cart"},d={class:"col-5 col-md-2 mx-auto mt-5"},r={key:1,class:"my-5"},u={class:"container"},p={class:"border border-2 p-3"},h={class:"row row-cols-1 g-5 mx-0 justify-content-center"},k={class:"col-12 col-lg-8 py-3 px-0 table-responsive"},L={class:"table align-middle mt-3"},m=["src","alt"],g={class:"text-end"},y=["onUpdate:modelValue","onChange","aria-label"],b={class:"text-end"},x={class:"text-end"},v=["onClick"],C={class:"col-12 col-lg-8 p-0 d-flex flex-column"},f={class:"col-12 col-md-6 ms-auto"},w={for:"coupon-code"},$={class:"input-group mb-3"},_={class:"mt-1"},F={class:"text-end py-2",colspan:"3"},N={class:"text-end w-50"},T={class:"text-end w-50"},E={class:"text-success"},I={class:"text-end w-50"},X={class:"border-top"},j={class:"text-end w-50"},q={class:"mt-5 col-12 col-md-2 mx-auto"};function Q(t,e,s,Q,U,M){const S=(0,a.g2)("LoadingOverlay"),V=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(S,{active:U.isLoading},null,8,["active"]),U.cartQty?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[e[7]||(e[7]=(0,a.Lk)("div",{class:"px-2"},[(0,a.Lk)("h2",{class:"fs-3 text-custom"},"購物車清單")],-1)),(0,a.Lk)("table",L,[e[6]||(e[6]=(0,a.Lk)("thead",{class:"table-bg text-custom text-nowrap"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"ps-3",style:{width:"75px"}},"商品"),(0,a.Lk)("th",{style:{width:"140px"}}),(0,a.Lk)("th",{class:"text-end",style:{width:"120px"}},"單價"),(0,a.Lk)("th",{class:"text-end",style:{width:"120px"}},"數量"),(0,a.Lk)("th",{class:"text-end",style:{width:"120px"}},"小計"),(0,a.Lk)("th",{class:"text-end",style:{width:"50px"}},"編輯")])],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(U.cart.carts,(s=>((0,a.uX)(),(0,a.CE)("tbody",{class:"text-nowrap text-custom",key:s.id},[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:s.product.imageUrl,alt:s.product.title,style:{width:"75px",height:"50px","background-size":"cover","background-position":"center"}},null,8,m)]),(0,a.Lk)("td",null,(0,c.v_)(s.product.title),1),(0,a.Lk)("td",g,"NT$ "+(0,c.v_)(t.$filters.currency(s.product.price)),1),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control form-control-sm ms-auto","onUpdate:modelValue":t=>s.qty=t,min:"1",max:"10",onChange:t=>M.updateCart(s,s.qty),style:{width:"50px"},"aria-label":`商品 ${s.name} 的數量`},null,40,y),[[o.Jo,s.qty,void 0,{number:!0}]])]),(0,a.Lk)("td",b,"NT$ "+(0,c.v_)(t.$filters.currency(s.total)),1),(0,a.Lk)("td",x,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>M.deleteCart(s.product.title,s.id)},e[5]||(e[5]=[(0,a.Lk)("i",{class:"bi bi-trash3-fill fs-5"},null,-1)]),8,v)])])])))),128))])]),(0,a.Lk)("div",C,[e[13]||(e[13]=(0,a.Lk)("div",{class:"px-2"},[(0,a.Lk)("h2",{class:"fs-3"},"購物車總計")],-1)),(0,a.Lk)("div",f,[(0,a.Lk)("label",w,[e[8]||(e[8]=(0,a.eW)("優惠碼 ")),(0,a.Lk)("div",$,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control text-custom table-bg border-1",placeholder:"請輸入優惠碼","aria-describedby":"coupon-code","onUpdate:modelValue":e[0]||(e[0]=t=>U.couponCode=t)},null,512),[[o.Jo,U.couponCode]]),(0,a.Lk)("button",{class:"btn btn-outline-custom",type:"button",id:"coupon-code",onClick:e[1]||(e[1]=t=>M.addCouponCode())},"套用優惠券")])])]),(0,a.Lk)("table",_,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",F,"共 "+(0,c.v_)(U.cartQty)+" 筆商品",1)]),(0,a.Lk)("tr",null,[e[9]||(e[9]=(0,a.Lk)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1)),(0,a.Lk)("td",N,"NT$ "+(0,c.v_)(t.$filters.currency(U.cart.total)),1)]),(0,a.Lk)("tr",null,[e[10]||(e[10]=(0,a.Lk)("td",{class:"text-end py-2",colspan:"2"},"運費",-1)),(0,a.Lk)("td",T,"NT$ "+(0,c.v_)(t.$filters.currency(U.deliveryFee)),1)]),(0,a.Lk)("tr",E,[e[11]||(e[11]=(0,a.Lk)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1)),(0,a.Lk)("td",I," - NT$ "+(0,c.v_)(t.$filters.currency(U.cart.total-U.cart.final_total)),1)]),(0,a.Lk)("tr",X,[e[12]||(e[12]=(0,a.Lk)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1)),(0,a.Lk)("td",j,"NT$ "+(0,c.v_)(t.$filters.currency(U.cart.final_total)),1)])])]),(0,a.Lk)("div",q,[(0,a.Lk)("button",{type:"button",onClick:e[2]||(e[2]=(...t)=>M.toCheckInfo&&M.toCheckInfo(...t)),class:"btn btn-outline-custom w-100"}," 填寫資料 ")])])])])])])):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[e[4]||(e[4]=(0,a.Lk)("h2",{class:"text-center text-custom"},"購物清單目前尚無選購商品！",-1)),(0,a.Lk)("div",d,[(0,a.bF)(V,{to:"/productList",class:"btn btn-outline-custom btn-sm w-100"},{default:(0,a.k6)((()=>e[3]||(e[3]=[(0,a.eW)(" 前往商品區！ ")]))),_:1})])])])]))],64)}s(4114);var U={data(){return{cart:{},deliveryFee:0,cartQty:0,couponCode:"",isLoading:!1}},inject:{emitter:["emitter"]},methods:{getCard(){const t="https://vue3-course-api.hexschool.io/api/wei8891-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(this.cart=t.data.data,this.isLoading=!1,this.cartQty=t.data.data.carts.length)})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},updateCart(t,e){const s=`https://vue3-course-api.hexschool.io/api/wei8891-api/cart/${t.id}`;this.isLoading=!0;const a={product_id:t.product_id,qty:e};this.$http.put(s,{data:a}).then((t=>{t.data.success&&(this.isLoading=!1,this.getCard())})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},deleteCart(t,e){const s=`https://vue3-course-api.hexschool.io/api/wei8891-api/cart/${e}`;this.isLoading=!0,this.$http.delete(s).then((s=>{s.data.success&&(this.isLoading=!1,this.emitter.emit("update-cart",e),this.$httpMessageState(s,`已將${t}移除購物車`),this.getCard())})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/wei8891-api/coupon",e={code:this.couponCode};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{t.data.success?(this.isLoading=!1,this.$httpMessageState(t,"套用優惠券"),this.getCard()):(this.isLoading=!1,this.$httpMessageState(t,"套用優惠券"))})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:t.response.data.message})}))},toCheckInfo(){this.$router.push("/checkInfo")}},created(){this.getCard()}},M=s(1241);const S=(0,M.A)(U,[["render",Q]]);var V=S}}]);
//# sourceMappingURL=468.9696b7c9.js.map