{"version":3,"file":"js/583.e5887809.js","mappings":"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","sources":["webpack://furniture-project/./src/methods/saveFave.js","webpack://furniture-project/./src/views/frontend/FavoriteView.vue","webpack://furniture-project/./src/views/frontend/FavoriteView.vue?0982"],"sourcesContent":["export default {\n  saveFavorite(fave) {\n    const favoriteStr = JSON.stringify(fave);\n    localStorage.setItem('favoriteProduct', favoriteStr);\n  },\n  getFavorite() {\n    return JSON.parse(localStorage.getItem('favoriteProduct'));\n  },\n};\n","<template>\n  <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n<div class=\"mt-5\">\n  <div class=\"banner d-flex flex-column justify-content-center align-items-center\">\n    <div class=\"text-center\">\n      <h1 class=\"text-custom mb-3 fw-bold\">我的收藏</h1>\n    </div>\n  </div>\n</div>\n<div class=\"my-5\" v-if=\"!faveList.length\">\n  <div class=\"container\">\n    <div class=\"border border-2 px-2 py-5 p-lg-5\">\n      <h2 class=\"text-center text-custom fw-bold\">收藏清單目前是空的</h2>\n      <div class=\"col-5 col-md-2 mx-auto mt-3\">\n        <router-link to=\"/productList\" class=\"btn btn-outline-custom btn-sm w-100\">\n          前往商品專區\n        </router-link>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"my-5\" v-else>\n  <div class=\"container\">\n    <div class=\"border border-2 px-1 py-5 p-lg-5\">\n      <div class=\"table-responsive-md\">\n        <table class=\"table text-nowrap\">\n          <thead>\n            <tr>\n              <th colspan=\"2\" style=\"width: 50%;\">商品資訊</th>\n              <th class=\"text-end\" style=\"width: 25%;\">價格</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in faveProduct\" :key=\"item.id\">\n              <td>\n                <img style=\"width: 160px; height: 107px;\"\n                  :src=\"item.imageUrl\"\n                  :alt=\"item.title\" />\n              </td>\n              <td class=\"align-middle\">\n                <p class=\"fs-5 mb-0\">{{ item.title }}</p>\n              </td>\n              <td class=\"align-middle text-end \">\n                <p v-if=\"item.origin_price !== item.price\"\n                  class=\"fs-6 mb-0 text-decoration-line-through text-muted\">\n                  NT$ {{$filters.currency(item.origin_price) }}\n                </p>\n                <p class=\"fs-5 mb-0\">NT$ {{$filters.currency(item.price)  }}</p>\n              </td>\n              <td class=\"align-middle text-end\">\n                <div class=\"p-0\">\n                  <button type=\"button\" @click.prevent=\"addCart(item.id, 1)\"\n                    class=\"btn btn-outline-primary btn-sm p-0 me-3\" aria-label=\"加入購物車\">\n                    <i class=\"bi bi-cart4 fs-4\"></i>\n                  </button>\n                  <button type=\"button\" @click.prevent=\"delFave(item)\"\n                    class=\"btn btn-outline-danger btn-sm p-0 me-2\" aria-label=\"移除收藏\">\n                    <i class=\"bi bi-trash3-fill fs-4\"></i>\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport saveFave from '@/methods/saveFave';\n\nexport default {\n  data() {\n    return {\n      faveList: saveFave.getFavorite() || [],\n      faveProduct: [],\n      isLoading: false,\n    };\n  },\n  inject: ['emitter'],\n  methods: {\n    getFave() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.faveProduct = res.data.products.filter((item) => this.faveList.includes(item.id));\n          }\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: error.response.data.message,\n          });\n        });\n    },\n    updateFave() {\n      this.faveList = saveFave.getFavorite();\n    },\n    delFave(item) {\n      this.isLoading = true;\n      this.faveList.splice(this.faveList.indexOf(item.id), 1);\n      this.$httpMessageState({\n        data: {\n          success: true,\n        },\n      }, `已將 ${item.title} 移除收藏清單`);\n      this.isLoading = false;\n      saveFave.saveFavorite(this.faveList);\n      this.emitter.emit('update-fave', this.faveList);\n      this.getFave();\n    },\n    addCart(id, qty) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty,\n      };\n      this.$http.post(api, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.emitter.emit('update-cart', id);\n            this.isLoading = false;\n            this.getFave();\n            this.$httpMessageState(res, '加入購物車');\n          }\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: error.response.data.message,\n          });\n        });\n    },\n  },\n  created() {\n    this.emitter.on('update-fave', this.updateFave);\n    this.getFave();\n  },\n};\n</script>\n<style>\n.text-custom {\n  color: #4f332d !important;\n}\n.btn-outline-custom {\n  color: #4f332d;\n  border-color: #4f332d;\n}\n</style>\n","import { render } from \"./FavoriteView.vue?vue&type=template&id=53f6bd76\"\nimport script from \"./FavoriteView.vue?vue&type=script&lang=js\"\nexport * from \"./FavoriteView.vue?vue&type=script&lang=js\"\n\nimport \"./FavoriteView.vue?vue&type=style&index=0&id=53f6bd76&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["saveFavorite","fave","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","key","class","_createElementBlock","_Fragment","_createVNode","_component_LoadingOverlay","active","$data","isLoading","_createElementVNode","faveList","length","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","colspan","style","_renderList","faveProduct","item","id","src","imageUrl","alt","title","_hoisted_10","_hoisted_11","_hoisted_12","_toDisplayString","_hoisted_13","origin_price","price","_hoisted_14","_ctx","$filters","currency","_createCommentVNode","_hoisted_15","_hoisted_16","_hoisted_17","type","onClick","_withModifiers","$event","$options","addCart","_hoisted_18","delFave","_hoisted_19","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","data","saveFave","inject","methods","getFave","this","api","$http","get","then","res","success","products","filter","includes","catch","error","emitter","emit","response","message","updateFave","splice","indexOf","$httpMessageState","qty","cart","product_id","post","created","on","__exports__","render"],"sourceRoot":""}