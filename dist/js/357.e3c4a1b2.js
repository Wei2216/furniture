"use strict";(self["webpackChunkfurniture_project"]=self["webpackChunkfurniture_project"]||[]).push([[357],{3357:function(e,l,a){a.r(l),a.d(l,{default:function(){return D}});var s=a(6768),t=a(4232),r=a(5130);const c={class:"mt-5"},d={class:"container"},o={class:"row g-3 my-5 flex-lg-row-reverse"},i={class:"col-12 col-lg-6"},n={class:"border border-2 p-3 p-md-5"},u={class:"row row-cols-1 g-5"},m={class:"col"},k={class:"row flex-column g-3 mt-3"},p={class:"card border-0 cart-card"},f={class:"row"},v={class:"col-md-5"},L=["src","alt"],b={class:"col-md-7"},h={class:"card-body p-0"},y={class:"card-title cart-product-title fw-bold"},g={class:"card-text cart-price"},x={class:"card-text"},_={class:"col d-flex flex-column justify-content-between"},w={class:"mt-3 w-100"},F={class:"text-end py-2",colspan:"3"},V={class:"text-end w-50"},C={class:"text-end w-50"},$={class:"text-success"},E={class:"text-end w-50"},N={class:"border-top"},T={class:"text-end w-50"},U={class:"col-12 col-lg-6"},q={class:"border border-2 p-3 p-md-5 h-100"},M={class:"row g-5"},X={class:"col-12"},j={class:"col"},A={class:"col"},I={class:"col"},K={class:"col"},O={class:"col"},Q=["value"],P={class:"col"};function S(e,l,a,S,z,J){const B=(0,s.g2)("LoadingOverlay"),D=(0,s.g2)("VeeField"),G=(0,s.g2)("ErrorMessage"),H=(0,s.g2)("VeeForm");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(B,{active:z.isLoading},null,8,["active"]),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",o,[(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[l[6]||(l[6]=(0,s.Lk)("h2",{class:"fs-3 cart-title"},"購物清單",-1)),(0,s.Lk)("div",k,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.cart.carts,(l=>((0,s.uX)(),(0,s.CE)("div",{class:"col-10",key:l.id},[(0,s.Lk)("div",p,[(0,s.Lk)("div",f,[(0,s.Lk)("div",v,[(0,s.Lk)("img",{src:l.product.imageUrl,class:"img-fluid cart-img",alt:l.product.title},null,8,L)]),(0,s.Lk)("div",b,[(0,s.Lk)("div",h,[(0,s.Lk)("h5",y,(0,t.v_)(l.product.title),1),(0,s.Lk)("p",g,"數量："+(0,t.v_)(l.qty),1),(0,s.Lk)("p",x,"NT$ "+(0,t.v_)(e.$filters.currency(l.product.price)),1)])])])])])))),128))])]),(0,s.Lk)("div",_,[(0,s.Lk)("div",null,[l[11]||(l[11]=(0,s.Lk)("h2",{class:"fs-3 cart-summary-table"},"購物總計",-1)),(0,s.Lk)("table",w,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",F,"共 "+(0,t.v_)(z.cartQty)+" 筆商品",1)]),(0,s.Lk)("tr",null,[l[7]||(l[7]=(0,s.Lk)("td",{class:"text-end py-2",colspan:"2"},"商品金額",-1)),(0,s.Lk)("td",V,"NT$ "+(0,t.v_)(e.$filters.currency(z.cart.total)),1)]),(0,s.Lk)("tr",null,[l[8]||(l[8]=(0,s.Lk)("td",{class:"text-end py-2",colspan:"2"},"運費總計",-1)),(0,s.Lk)("td",C,"NT$ "+(0,t.v_)(e.$filters.currency(z.deliveryFee)),1)]),(0,s.Lk)("tr",$,[l[9]||(l[9]=(0,s.Lk)("td",{class:"text-end py-2",colspan:"2"},"優惠折扣",-1)),(0,s.Lk)("td",E," - NT$ "+(0,t.v_)(e.$filters.currency(z.cart.total-z.cart.final_total)),1)]),(0,s.Lk)("tr",N,[l[10]||(l[10]=(0,s.Lk)("td",{class:"text-end py-2",colspan:"2"},"總計金額",-1)),(0,s.Lk)("td",T,"NT$ "+(0,t.v_)(e.$filters.currency(z.cart.final_total)),1)])])])])])])])]),(0,s.Lk)("div",U,[(0,s.Lk)("div",q,[(0,s.Lk)("div",M,[(0,s.Lk)("div",X,[l[20]||(l[20]=(0,s.Lk)("h2",{class:"fs-3"},"收件人資料",-1)),(0,s.bF)(H,{class:"row flex-column g-3 mt-3",onSubmit:J.createOrder},{default:(0,s.k6)((({errors:e})=>[(0,s.Lk)("div",j,[l[12]||(l[12]=(0,s.Lk)("label",{for:"userName",class:"form-label"},"收件人姓名*",-1)),(0,s.bF)(D,{type:"text",name:"name",class:(0,t.C4)(["form-control",{"is-invalid":e["name"]}]),id:"userName",placeholder:"請輸入姓名",rules:"required",modelValue:z.form.user.name,"onUpdate:modelValue":l[0]||(l[0]=e=>z.form.user.name=e)},null,8,["class","modelValue"]),(0,s.bF)(G,{name:"name",class:"invalid-feedback"})]),(0,s.Lk)("div",A,[l[13]||(l[13]=(0,s.Lk)("label",{for:"userEmail",class:"form-label"},"Email*",-1)),(0,s.bF)(D,{type:"email",name:"email",class:(0,t.C4)(["form-control",{"is-invalid":e["email"]}]),id:"userEmail",placeholder:"請輸入Email",rules:"email|required",modelValue:z.form.user.email,"onUpdate:modelValue":l[1]||(l[1]=e=>z.form.user.email=e)},null,8,["class","modelValue"]),(0,s.bF)(G,{name:"email",class:"invalid-feedback"})]),(0,s.Lk)("div",I,[l[14]||(l[14]=(0,s.Lk)("label",{for:"userTel",class:"form-label"},"收件人電話*",-1)),(0,s.bF)(D,{type:"tel",name:"tel",class:(0,t.C4)(["form-control",{"is-invalid":e["tel"]}]),id:"userTel",placeholder:"請輸入電話",rules:"required",modelValue:z.form.user.tel,"onUpdate:modelValue":l[2]||(l[2]=e=>z.form.user.tel=e)},null,8,["class","modelValue"]),(0,s.bF)(G,{name:"tel",class:"invalid-feedback"})]),(0,s.Lk)("div",K,[l[15]||(l[15]=(0,s.Lk)("label",{for:"userAddress",class:"form-label"},"收件人地址*",-1)),(0,s.bF)(D,{type:"text",name:"address",class:(0,t.C4)(["form-control",{"is-invalid":e["address"]}]),id:"userAddress",placeholder:"請輸入地址",rules:"required",modelValue:z.form.user.address,"onUpdate:modelValue":l[3]||(l[3]=e=>z.form.user.address=e)},null,8,["class","modelValue"]),(0,s.bF)(G,{name:"address",class:"invalid-feedback"})]),(0,s.Lk)("div",O,[l[17]||(l[17]=(0,s.Lk)("label",{for:"userPay",class:"form-label"},"付款方式*",-1)),(0,s.bF)(D,{id:"userPay",name:"payment_method",class:(0,t.C4)(["form-control",{"is-invalid":e["payment_method"]}]),rules:"required",modelValue:z.form.payment_method,"onUpdate:modelValue":l[4]||(l[4]=e=>z.form.payment_method=e),as:"select"},{default:(0,s.k6)((()=>[l[16]||(l[16]=(0,s.Lk)("option",{disabled:"",value:""},"請選擇付款方式",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.paymentMethod,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e.value,value:e.value},(0,t.v_)(e.value),9,Q)))),128))])),_:2},1032,["class","modelValue"]),(0,s.bF)(G,{name:"payment_method",class:"invalid-feedback"})]),(0,s.Lk)("div",P,[l[18]||(l[18]=(0,s.Lk)("label",{for:"userMessage",class:"form-label"},"留言",-1)),(0,s.bo)((0,s.Lk)("textarea",{style:{resize:"none"},class:"form-control",id:"userMessage",rows:"3","onUpdate:modelValue":l[5]||(l[5]=e=>z.form.message=e)},null,512),[[r.Jo,z.form.message]])]),l[19]||(l[19]=(0,s.Lk)("div",{class:"col d-flex justify-content-end"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-outline-custom mt-4"}," 前往結帳 ")],-1))])),_:1},8,["onSubmit"])])])])])])])])],64)}a(4114);var z={data(){return{cart:{},deliveryFee:0,cartQty:0,form:{user:{name:"",email:"",tel:"",address:""},message:"",payment_method:""},paymentMethod:[{value:"貨到付款"}],isLoading:!1}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/api/wei8891-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{e.data.success&&(this.cart=e.data.data,this.isLoading=!1,this.cartQty=e.data.data.carts.length)}))},createOrder(){const e="https://vue3-course-api.hexschool.io/api/wei8891-api/order",l=this.form;this.$http.post(e,{data:l}).then((e=>{this.form={user:{name:"",email:"",tel:"",address:""},message:"",payment_method:""},this.$router.push(`/checkout/${e.data.orderId}`)}))}},created(){this.getCart()}},J=a(1241);const B=(0,J.A)(z,[["render",S]]);var D=B}}]);
//# sourceMappingURL=357.e3c4a1b2.js.map